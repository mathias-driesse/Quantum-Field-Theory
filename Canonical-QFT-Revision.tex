%!TEX program = lualatex
\documentclass{article}
\usepackage{physics, amsmath, amsfonts, empheq, mathtools, booktabs, hyperref, simpler-wick, tikz-feynman, slashed}
\usepackage[style=nature, autocite = inline]{biblatex}
\usepackage[margin=1in]{geometry}

\setlength{\parindent}{0pt}
\numberwithin{equation}{section}

\newcommand*\widefbox[1]{\fbox{\hspace{2em}#1\hspace{2em}}}
\newcommand{\normord}[1]{:\mathrel{#1}:}

\title{Canonical Quantum Field Theory}
\author{Mathias Driesse}

\begin{document}

\maketitle

\section{Canonical Quantization of a Scalar Field}

A scalar field $\phi(x)$ that obeys the Klein-Gordon equation
\begin{align}
    (\partial^2 + m^2)\phi(x) = 0
\end{align}

also obeys the following \textit{equal-time commutation relations} (ETCRs):
\begin{gather}
    [\phi(t,\underline{x}),\pi(t,\underline{x}')] = [\phi(t, \underline{x}), \dot{\phi}(t, \underline{x}^\prime)] = i\delta(\underline{x} - \underline{x}^\prime) \\
    [\phi(t, \underline{x}), \phi(t, \underline{x}^\prime)] = [\pi(t,\underline{x}), \pi(t,\underline{x}')]=[\dot{\phi}(t, \underline{x}), \dot{\phi}(t, \underline{x}^\prime)] = 0
\end{gather}

where the conjugate momentum $\pi(x)$ is the usual $\pdv{\mathcal{L}}{\dot{\phi}(x)}$. A scalar field may be expanded in terms of mode operators:
\begin{align}
    \phi(t, \underline{x}) &= \phi^+(x) + \phi^-(x) \\
    &= \int \hat{d}^3 p \frac{1}{2 \omega(\underline{p})}\left(a(\underline{p}) e^{-i p \cdot x}+a(\underline{p})^{\dagger} e^{i p \cdot x}\right)
\end{align}

where the creation and annihilation operators in momentum space obey the commutation relations
\begin{align}
    [a (\underline{p}), a^\dagger(\underline{p}^\prime)] = 2\omega(\underline{p}) \hat{\delta}(\underline{p}-\underline{p}^\prime) \\
    [a (\underline{p}), a(\underline{p}^\prime)] = [a^\dagger(\underline{p}), a^\dagger(\underline{p}^\prime)] = 0.
\end{align}

To prevent infinite contributions to the energy, we require that all terms be \textit{normal ordered} - that is, all annihilation operators stand to the right of all creation operators. This results in the convenient property
\begin{empheq}[box=\widefbox]{align}
    \ev{\normord{\phi(x)\phi(y)}}{0} = 0.
\end{empheq}

We may simplify covariant commutation relations for the Klein-Gordon field by introducing three invariant functions
\begin{gather}
    i\Delta^+(x-y) \equiv [\phi^+(x), \phi^-(y)] = \int \hat{d}^3 p \dfrac{1}{2\omega(\underline{p})}e^{-ip \cdot (x-y)} \\
    i \Delta^-(x-y) \equiv [\phi^-(x), \phi^+(y)] = - \Delta^+(y-x) = -\int \hat{d}^3 p \dfrac{1}{2\omega(\underline{p})}e^{ip \cdot (x-y)}\\
    \Delta(x-y) \equiv \Delta^+(x-y) + \Delta^-(x-y).
\end{gather}

All three satisfy the Klein-Gordon equation, and we may furthermore write $\Delta$ in a manifestly covariant form:
\begin{equation}
    \Delta(x-y) = -i \int \hat{d}^4p \hat{\delta}(p^2-m^2)\theta(p_0)e^{-ip\cdot (x-y)}.
\end{equation}

$\Delta$ also satisfies the microcausality condition
\begin{empheq}[box=\widefbox]{align}
    [\phi(x), \phi(y)] = 0, \quad (x-y)^2 < 0.
\end{empheq}

\section{Interactions and Scattering in $\phi^3$ Theory}

The Lagrangian for this theory is given by 
\begin{align}
    \mathcal{L} &\equiv \mathcal{L}_0 + \mathcal{L}_I \\
    &= \frac{1}{2} \partial_\mu \phi \partial^\mu \phi - \frac{1}{2}m^2\phi^2 - \frac{1}{3!} g \phi^3.
\end{align}

We may write the Euler-Lagrange equation as 
\begin{align}
    (\partial^2 + m^2)\phi = -\frac{1}{2}g\phi^2.
\end{align}

Since this is a nonlinear partial differential equation, we would like to proceed by solving it in terms of powers of coupling $g$.

We define the S-matrix as the time evolution operator between two states in the far past and the far future at which the particles involved may be considered non-interacting:
\begin{align}
    \ket{\Psi, \infty} = S\ket{\Psi, -\infty}.
\end{align}

Since in general, we must consider many possible initial and final states, we consider the $S$-matrix elements defined as
\begin{align}
    S_{fi} = \mel{f}{S}{i}
\end{align}

Note that the $S$-matrix is unitary ($S^\dagger S = SS^\dagger = 1$) even when particles in the state are destroyed and/or created.

Furthermore, in the future we will work in the interaction picture of quantum mechanics - a mix of the SchrÃ¶dinger and Heisenberg pictures. We split the Hamiltonian into free and non-interacting parts $H = H_0 + H_I$ and let the time evolution of the state be governed by $H_I$, and the time evolution of the operators by $H_0$:
\begin{gather}
    \frac{\partial}{\partial t} O(t) = i [H_0, O(t)] \\
    i \frac{\partial}{\partial t} \ket{\psi, t} = H_I \ket{\psi, t}. \label{eq:schrodinger}
\end{gather}

Integrating Eq. \ref{eq:schrodinger}, we obtain a recursion relation for $\ket{\Psi, t}$:
\begin{align}
    \ket{\Psi, t} &= \ket{\Psi, -\infty} + \int_{-\infty}^t dt_1 \frac{\partial}{\partial t}\ket{\Psi, t_1} \\
    &= \ket{i} - i \int_{-\infty}^t dt_1 H_I(t_1) \ket{\Psi, t_1}.
\end{align}

By substituting the recursion relation into itself, we write the Dyson series explicitly as
\begin{align}
    S=1+\sum_{n=1}^{\infty}(-i)^n \int_{-\infty}^{\infty} d t_1 \int_{-\infty}^{t_1} d t_2 \cdots \int_{-\infty}^{t_{n-1}} d t_n H_I\left(t_1\right) H_I\left(t_2\right) \cdots H_I\left(t_n\right).
\end{align}

The introduction of the time ordered product of two operators
\begin{align}
    T(A(t_1)B(t_2)) = \theta(t_1 - t_2)A(t_1)B(t_2) + \theta(t_2 - t_1)B(t_2)A(t_1)
\end{align}

and the use of the Hamiltonian density instead of the Hamiltonain yields the manifestly covariant expression

\begin{empheq}[box=\widefbox]{align}
    S=\sum_{n=0}^{\infty} \frac{(-i)^n}{n !} \int d^4 x_1 \int d^4 x_2 \cdots \int d^4 x_n T\left(\mathcal{H}_I\left(x_1\right) \mathcal{H}_I\left(x_2\right) \cdots \mathcal{H}_I\left(x_n\right)\right).
\end{empheq}

Since our calculations involve time-ordered products through \textit{Wick's Theorem}, which we will see shortly, it is convenient to define the Feynman propagator
\begin{align}
    \Delta_F(x-x') \equiv \theta(t)\Delta^+(x) - \theta(-t)\Delta^-(x).
\end{align}

Thus, making use of our knowledge of the functions $\Delta^{\pm}$, we find that
\begin{empheq}[box=\widefbox]{align}
    i\Delta_F(x-x') = \wick{\c\phi (x) \c\phi (x')} = \ev{T\left(\phi(x) \phi(x')\right)}{0},
\end{empheq}

where the bracket on top denotes a \textit{Wick contraction}. How can we relate the time-ordered product in general, normal ordering and Wick contractions? The answer is \textit{Wick's Theorem}. For unequal times
\begin{equation}
\begin{aligned}
    T(ABCD\cdots WXYZ) &= \, \normord{ABCD \cdots WXYZ} \\
        & + \normord{\wick{\c A \c B}C\cdots YZ} + \normord{\wick{\c1 A B \c1 C} \cdots YZ} + \cdots + \normord{ABC \cdots \wick{\c Y \c Z}} \\
        & + \normord{\wick{\c1 A \c1 B \c1 C \c1 D} \cdots WXYZ} + \cdots + \normord{ABCD \cdots \wick{\c1 W \c1 X \c1 Y \c1 Z}} \\
        & + \cdots,
\end{aligned}
\end{equation}

which simplifies to, for example, in the case of a single time ordering to 
\begin{equation}
    T(A(x)B(x')) = \normord{A(x)B(x')} + \ev{T(A(x)B(x'))}{0}.
\end{equation}

When performing the Dyson expansion, we will need to evaluate the Feynman propagator many times. Therefore, it is usefeful to rewrite it in terms of a single integral

\begin{equation}
    \Delta_F(x) = \int \hat{d}^4p \frac{e^{-ip\cdot x}}{p^2-m^2+i\varepsilon}
\end{equation}

where $\varepsilon \equiv 2\eta \omega(\underline{p})$ is a small number that takes care of the contours in the complex plane that we have to take due to the poles at $p=\pm m$. In fact, $\Delta_F$ is a Green's function for the Klein-Gordon equation, corresponding to Dirichlet boundary conditions (initial and final conditions on $\phi(x)$), and is thus appropriate to our quantum paradigm of initial and final states.

As an example, let us expand the $S$-matrix in position space. In $\phi^3$ theory, we have $\mathcal{H}_I(x) = \frac{g}{3!}\normord{\phi^3(x)}$, which we expand in terms of $\phi^+$ (which destroys a particle at $x$) and $\phi^-$ (which creates a particle at $x$).

\begin{enumerate}
    \item For $n=0$, nothing happens.
    \item For $n=1$,
    \begin{equation}
        S^{(1)} =\frac{-ig}{3!} \int d^4x \, T(\normord{\phi^3(x)}).
    \end{equation}
        Since there are no \textit{unequal times}, there are no terms with contractions. The terms without contractions cannot conserve momentum, so they vanish.
    \item For $n=2$,
    \begin{equation}
        \begin{aligned}
            S^{(2)} = -\frac{g^2}{2!(3!)^2} \int d^4x d^4y \, T\left(\normord{\phi^3(x)}\normord{\phi^3(y)}\right),
        \end{aligned}
    \end{equation}
        which we may split up into terms containing zero, one, two and three contractions.
    \begin{enumerate}
        \item $S_0^{(2)}$ only contains one term, and it is proportional to $\normord{\phi^3(x)\phi^3(y)}$. The interactions at $x$ and $y$ are unrelated, so they factorize and vanish due to momentum conservation as in the $n=1$ case.
        \item $S_1^{(2)}$ contains terms with one contraction, i.e. proportional to $\wick{\c\phi(x) \c\phi(y)} \normord{\phi^2(x) \phi^2(y)}$. Expanding it out in terms of $\phi^+$ and $\phi^-$, there are three terms that survive momentum conservation:
        \begin{equation} \label{eq:s12}
            \begin{aligned}
                \phi^-(y)\phi^-(y)\wick{\c\phi(x) \c\phi(y)}\phi^+(x)\phi^+(x), \\
                \phi^-(x)\phi^-(y)\wick{\c\phi(x) \c\phi(y)}\phi^+(x)\phi^+(y), \\
                \phi^-(y)\phi^-(x)\wick{\c\phi(x) \c\phi(y)}\phi^+(x)\phi^+(y).
            \end{aligned}
        \end{equation}
        % which correspond to the three Feynman diagrams
        % \begin{figure}[!h]
        %     \feynmandiagram [horizontal=a to b]{
        %         i1 -- [scalar] a -- [scalar] i2,
        %         a -- [scalar] b,
        %         f1 -- [scalar] b -- [scalar] f2,
        %     };
        %     \feynmandiagram [vertical=a to b]{
        %         i1 -- [scalar] a -- [scalar] f1,
        %         a -- [scalar] b,
        %         i2 -- [scalar] b -- [scalar] f2,
        %     };
        % \end{figure}
        There is also a combinatorial $3^2$ factor, since there are 3 ways of contracting $\phi(x)$ and 3 ways of contracting $\phi(y)$.
        \item $S_2^{(2)}$ is given by the term $\wick{\c1\phi(x)\c1\phi(y)\c1\phi(x)\c1\phi(y)} \normord{\phi(x)\phi(y)}$, which diverges and forms the so-called \textit{self-energy correction}.
        \item $S_3^{(2)}$ is given by the term $\wick{\c1\phi(x)\c1\phi(y)\c1\phi(x)\c1\phi(y)\c1\phi(x)\c1\phi(y)}$, which also diverges, but as it is disconnected it makes no contribution to the scattering process.
    \end{enumerate}
\end{enumerate}

This is a lot of work for calculating the $S$-matrix! Fortunately, we are more interested in calculating the matrix elements $S_{fi} = \mel{f}{S}{i}$ than $S$ itself. Since we label free particle initial and final states by their definite on-shell momentum $\ket{\underline{p}} = a^\dagger(\underline{p})\ket{0}$, we should work in momentum space. Then
\begin{equation} \label{eq:phiplusp}
\begin{aligned}
    \phi^+(x)\ket{\underline{p}} &= \int  \frac{\hat{d}^3 \underline{p}'}{2E'} e^{-ip'\cdot x} a(\underline{p}')a^\dagger(\underline{p})\ket{0} \\
    &= \int d^3 \underline{p}'   e^{-ip'\cdot x} \delta^3(\underline{p}-\underline{p}')\ket{0} \\
    &= e^{-ip\cdot x}\ket{0}
\end{aligned}
\end{equation}

while
\begin{equation} \label{eq:phiminusp}
\begin{aligned}
    \bra{\underline{p}}\phi^-(x) &= \bra{0} a(\underline{p}) \int \frac{\hat{d}^3 \underline{p}'}{2E'} e^{ip'\cdot x} a^\dagger(\underline{p}) \\
    &= \bra{0} \int d^3 \underline{p}' e^{ip'\cdot x} \delta^3(\underline{p}-\underline{p}') \\
    &= e^{ip\cdot x} \bra{0}.
\end{aligned}
\end{equation}

As an example, let us perform a momentum-space calculation of the 2$\rightarrow$2 process through the $s$-channel. We may do this by simply inserting the first line of Eq. \ref{eq:s12}:
\begin{equation}
\begin{aligned}
    \mel{f}{S_{1,s}^{(2)}}{i} &= -\frac{3^2 g^2}{(3!)^2} \int d^4x \int d^4y \mel{q;q'}{\phi^-(y)\phi^-(y)\wick{\c\phi(x) \c\phi(y)}\phi^+(x)\phi^+(x)}{p;p'} \\
    &= -\frac{g^2}{4} \int d^4x \int d^4y \, 4 e^{i(q+q')\cdot x} \, i \int \hat{d}^4k \frac{e^{-ik\cdot (y-x)}}{k^2-m^2+i\varepsilon} e^{-i(p+p')\cdot x} \\
    &= -ig^2 \int \hat{d}^4k \,\hat{\delta}^4\left(q+q'-k\right)\hat{\delta}^4\left(k-p-p'\right) \frac{1}{k^2-m^2+i\varepsilon} \\
    &= \hat{\delta}^4\left(q+q'-p-p'\right)\frac{-ig^2}{(p+p')^2-m^2},
\end{aligned}
\end{equation}

where on the second line we have applied Eqs. \ref*{eq:phiplusp}, \ref*{eq:phiminusp} and inserted our expression for the Feynman propagator, with an additional factor of 4 coming from the choice of apply $(\phi^+)^2$ on $\ket{p;p'}$. For the other two contributions we have the same, replacing the denominator by $(p-q)^2-m^2$ and $(p-q')-m^2$ respectively. It is therefore useful to write down the \textit{Mandelstam invariants} $s$, $t$, $u$, defined as 
\begin{equation}
\begin{aligned}
    s=(p_1+p_2)^2=(p_3+p_4)^2 \\
    t=(p_1-p_3)^2=(p_2-p_4)^2 \\
    u=(p_1-p_4)^2=(p_2-p_3)^2.
\end{aligned}
\end{equation}

Applying a similar process to the loop diagram leads to a divergent term, which we will look at in more detail through $renormalization$. 

\subsection{Feynman rules for scalar field theory}

An attentive reader, having calculated all three channels, might have noticed that the process above seems fairly simple and algorithmic. Indeed, we can define the so-called \textit{Feynman rules}, which for any theory allow us to write down the contribution from each diagram without performing any nasty integrations. For scalar $\phi^3$ theory, we have:

\begin{itemize}
    \item for each $\phi^3$ vertex, a factor of $-ig$ and a delta function ensuring momentum conservation
    \item for each external line, a factor of $1$
    \item for each internal line of momentum $k$, a factor $i/(k^2-m^2+i\varepsilon)$
    \item for each momentum $k$ not fixed by momentum conservation, an integral $\int \hat{d}^4k$
    \item a symmetry factor.
\end{itemize}

\section{Complex Scalar Fields and Charge Conservation}

In quantum field theory, for the $S$-matrix to be unitary, we only require that the Lagrangian density $\mathcal{L}$, the Hamiltonian density $\mathcal{H}$, and the action $S$ be real. Thus, a quantum field may also be complex as long as above conditions are satisfied. They also have the important new property of charge conservation.

If we have a multiplet (several) of scalar fields $\phi_r(x)$, where $r=1,2,\cdots N$, then we may quantize them as we have done for a single scalar field, the only difference being an additional delta function in the nonzero commutators.

A complex scalar field $\phi(x)$ can be expressed in terms of two independent fields $\phi_1$ and $\phi_2$:
\begin{equation}
    \phi(x)=\frac{1}{\sqrt{2}}(\phi_1(x) + i\phi_2(x)).
\end{equation}

Then we have the Lagrangian density
\begin{equation}
    \mathcal{L} = \left(\partial_\mu\phi^\dagger(x)\right)\left(\partial^\mu\phi(x)\right)-m^2\phi^\dagger(x)\phi(x)
\end{equation}

along with the conjugate momentum $\pi(x)=\pdv{\mathcal{L}{\dot{\phi}(x)}}=\dot{\phi}^\dagger(x)$, which provides the ETCRs
\begin{equation}
    [\phi(t,\underline{x}), \pi(t,\underline{x}')]=[\phi^\dagger(t,\underline{x}),\pi^\dagger(t,\underline{x}')] = i\delta(\underline{x}-\underline{x}').
\end{equation}

Each of the fields $\phi(x)$ and $\phi^\dagger(x)$ obeys the Klein-Gordon equation independently. We expand the fields in terms of mode operators
\begin{equation}
\begin{aligned}
    \phi(x) = \int \hat{d}^3p \frac{1}{2\omega(\underline{p})} \left(a(\underline{p})e^{-ip\cdot x} + b^\dagger(\underline{p})e^{ip\cdot x}\right),
\end{aligned}
\end{equation}

noting that we can no longer assume the Hermiticity relation between the operator coefficients of the positive and negative frequency terms because $\phi(x)$ is not Hermitian. Furthermore, the commutation relations 
\begin{equation}
\begin{aligned}
    [a(\underline{p}), a^\dagger(\underline{p}')] = [b(\underline{p}), b^\dagger(\underline{p'})] = 2\omega(\underline{p}) \hat{\delta}^3(\underline{p}-\underline{p}')
\end{aligned}
\end{equation}

with all others being zero reproduce the ETCRs. $a$ and $b$ and their Hermitian conjugates are the creation and annihilation operators for two types of particles. Furthermore, momentum is conserved, with the 4-momentum operator (not to be confused with the conjugate of the field) being 
\begin{gather}
    P^\nu = \int d^3x T^{0\nu}(x)\\
    T^{\mu\nu}(x) = \normord{\partial^\mu \phi^\dagger(x) \partial^\nu \phi(x) + \partial^\nu \phi^\dagger(x) \partial^\mu \phi(x) - \eta^{\mu\nu} \mathcal{L}(x)},
\end{gather}

or in terms of mode operators
\begin{equation}
    P^\nu = \int \hat{d}^3p \frac{1}{2\omega(\underline{p})}p^\nu \left(a^\dagger(\underline{p}) a(\underline{p}) + b^\dagger(\underline{p})b(\underline{p})\right).
\end{equation}

\subsection{Charge conservation}

Additionally, notice that the Lagrangian density is invariant under the phase transformations

\begin{equation}
\begin{aligned}
    \phi(x) \rightarrow \phi'(x)&=e^{i\alpha}\phi(x) \approx (1+i\alpha)\phi(x) \\
    \phi(x) \rightarrow \phi'(x)&=e^{-i\alpha}\phi(x) \approx (1-i\alpha)\phi(x),
\end{aligned}
\end{equation}

which is known as a \textit{global phase transformation} or \textit{gauge transformation of the first kind}. Furthermore, since the Lagrangian density itself is invariant, according to Noether's theorem there is a conserved current $j$ and conserved charge $Q$:
\begin{gather}
    Q = \int d^3x j^0(x) \\
    j^\mu(x) = -\frac{1}{\alpha}\left(\pdv{\mathcal{L}}{\partial_\mu\phi} + \pdv{\mathcal{L}}{\partial_\mu\phi^\dagger}\right) = i \normord{\phi^\dagger(x)\left(\partial^\mu \phi(x)\right) - \left(\partial^\mu \phi^\dagger(x)\right)\phi(x)}.
\end{gather}

Thus, the existence of charge is directly tied to the existence of complex scalar fields. Furthermore, we can think of $a$ as corresponding to particles with ``charge'' $+1$ while $b$ would correspond to particles with ``charge'' $-1$. Since $Q$ is conserved, these particles must always be created or destroyed in pairs - they are anti-particles of each other.

\subsection{Feynman rules for complex scalar fields}

The propagator for complex scalar fields is the same as for real scalar fields:
\begin{equation}
    \wick{\c\phi(x)\c\phi^\dagger(x')} = i\Delta_F(x-x').
\end{equation}

The external states are given by 
\begin{equation}
    \ket{p,+} = a^\dagger(\underline{p})\ket{0}, \quad \ket{p,-}=b^\dagger(\underline{p})\ket{0},
\end{equation}

so then
\begin{gather}
    \phi_+(x)\ket{p,+} = e^{-ip\cdot x}\ket{0}, \quad \phi_+^\dagger(x)\ket{p,-} = e^-ip\cdot x \ket{0} \\
    \bra{p,+}\phi_-^\dagger(x)=e^{ip\cdot x} \bra{0}, \quad \bra{p,-} \phi_-(x) = e^{ip\cdot x} \bra{0}.
\end{gather}

In terms of the interactions possible, remembering that the Lagrangian must remain real, we commonly use
\begin{equation}
    \mathcal{L}_I^4 = -\frac{1}{4}\lambda (\phi^\dagger\phi)^2
\end{equation}
or if there is also a real scalar field $\Phi$ 
\begin{equation}
    \mathcal{L}_I^3 = -y\Phi(\phi^\dagger\phi).
\end{equation}

These additional processes allow much more interesting processes such as elastic scattering, decay, and charged particle elastic scattering. 

\subsection{$C$, $P$, and $T$ for scalar fields}

Under \textbf{parity}, $x^\mu=(t,\underline{x}) \rightarrow \bar{x}^\mu = (t, -\underline{x})$, $p^\mu = (E, \underline{p}) \rightarrow \bar{p}^\mu = (E, -\underline{p})$. This is implemented using the unitary operator $\mathcal{P}$, thus
\begin{equation}
    \mathcal{P} \ket{0}, \quad \mathcal{P} \ket{\underline{p}} = \ket{-\underline{p}}.
\end{equation}

Since $\ket{\underline{p}} = a^\dagger(\underline{p})\ket{0}$, we must have
\begin{equation}\label{eq:parity_scalar}
    \mathcal{P}a^\dagger(\underline{p})\mathcal{P}^\dagger = a^\dagger(-\underline{p}), \quad \mathcal{P}a(\underline{p})\mathcal{P}^\dagger = a(-\underline{p}).
\end{equation}

Therefore
\begin{equation}
    \phi(x) \rightarrow \mathcal{P} \phi(x) \mathcal{P}^\dagger = \phi(\bar{x}).
\end{equation}

Under \textbf{time reversal}, $x^\mu \rightarrow -\bar{x}^\mu$, $p^\mu \rightarrow \bar{p}^\mu$. Furthermore, initial and final states are interchanged $\mel{f}{\,}{i} \rightarrow \mel{i}{\,}{f}$, or alternatively $i \rightarrow -i$. $\mathcal{T}$ is anti-unitary: unitary, but also complex conjugates. It acts as 
\begin{equation}
    \mathcal{T}\ket{0} = \ket{0}, \quad \mathcal{T}\ket{\underline{p}} = \ket{-\underline{p}}, \quad \mathcal{T} a^\dagger(\underline{p})\mathcal{T}^\dagger = a^\dagger(-\underline{p}), \quad \mathcal{T}a(\underline{p})\mathcal{T}6 \dagger = a(-\underline{p})
\end{equation}

but
\begin{equation}
    \phi(x) \rightarrow \mathcal{T} \phi(x) \mathcal{T}^\dagger = \phi(-\bar{x}).
\end{equation}

Under \textbf{charge conjugation}, particles and antiparticles are exchanged: $\mathcal{C}\ket{\underline{p},+} = \ket{\underline{p},-}$, $\mathcal{C}\ket{\underline{p},-} = \ket{\underline{p},+}$, so 
\begin{equation}
    \mathcal{C}a^\dagger(\underline{p})\mathcal{C}^\dagger = b^\dagger(\underline{p}), \quad \mathcal{C}b^\dagger(\underline{p})\mathcal{C}^\dagger = a^\dagger(\underline{p}).
\end{equation}

Furthermore (only for complex fields, since scalar fields do not carry any charge),
\begin{equation}
    \mathcal{C}\phi(x)\mathcal{C}^\dagger = \phi^\dagger(x), \quad \mathcal{C}\phi^\dagger(x)\mathcal{C}^\dagger = \phi(x),
\end{equation}
and
\begin{eqnarray}
    \mathcal{C}j^\mu\mathcal{C}^\dagger = -j^\mu, \quad \mathcal{C}Q\mathcal{C}^\dagger = -Q.
\end{eqnarray}

\section{The Dirac Equation}

The Dirac equation, written in covariant form as 
\begin{empheq}[box=\widefbox]{align}
    (i\gamma^\mu \partial_\mu - m)\psi(x) = 0,
\end{empheq}

contains two objects worth studying in detail: $\gamma^\mu$ and $\psi(x)$. The gamma matrices $\gamma^\mu$ follow the \textit{Clifford algebra}
\begin{equation}
    \left\{\gamma^\mu, \gamma^\nu\right\} = 2\eta^{\mu\nu}
\end{equation}

and have two common representations, known as the Dirac basis and Weyl basis respectively:
\begin{gather}
    \gamma^0 = \begin{pmatrix}\imat{2}\end{pmatrix}, \quad \gamma^i = \begin{pmatrix}0 & \sigma^i \\ -\sigma^i & 0\end{pmatrix}, \quad \gamma^5 = \begin{pmatrix}0 & 1 \\ 1 & 0 \end{pmatrix}, \\
    \gamma^0 = \begin{pmatrix}0 & 1 \\ 1 & 0\end{pmatrix}, \quad \gamma^i = \begin{pmatrix}0 & \sigma^i \\ -\sigma^i & 0\end{pmatrix}, \quad \gamma^5 = \begin{pmatrix}-1 & 0 \\ 0 & 1\end{pmatrix},
\end{gather}

where we have used 
\begin{equation}
    \gamma^5 = i\gamma^0\gamma^1\gamma^2\gamma^3.
\end{equation}

Recalling our knowledge of the Lorentz group from Symmetries of Particles and Fields, Lorentz transformations may be written as
\begin{equation}
    S(\Lambda)=\exp\left(-\frac{i}{4}\omega_{\mu\nu} \sigma^{\mu\nu}\right), \quad \sigma^{\mu\nu} \equiv \frac{i}{2}\left[\gamma^\mu, \gamma^\nu\right].
\end{equation}

Under Lorentz transformations, the four-component object $\psi(x)$ transforms as 
\begin{equation}
    \psi(x) \rightarrow \psi'(x') = S(\Lambda)\psi(x),
\end{equation}

$\gamma^\mu$ transforms as 
\begin{equation}
    \Lambda^\mu_{\, \nu} \gamma^\nu = S(\Lambda)^{-1}\gamma^\mu S(\Lambda).
\end{equation}

We also introduce the conjugate $\bar{\psi} = \psi^\dagger(x)\gamma^0$.

From this, we can construct the 16 Dirac bilinears

\begin{equation}
    \begin{array}{ccc}
    \bar{\psi} \psi & \text { scalar } & 1 \\
    \bar{\psi} \gamma^\mu \psi & \text { vector } & 4 \\
    \bar{\psi} \sigma^{\mu \nu} \psi & \text { tensor } & 6 \\
    \bar{\psi} \gamma^5 \gamma^\mu \psi & \text { axial vector } & 4 \\
    \bar{\psi} \gamma^5 \psi & \text { pseudoscalar } & 1.
    \end{array}
\end{equation}

The Lagrangian for the Dirac field is given by 
\begin{empheq}[box=\widefbox]{align}
    \mathcal{L} = \bar{\psi}(x)\left(i\slashed{\partial}-m   \right)\psi(x)
\end{empheq}

if we treat $\psi(x)$ and $\bar{\psi}(x)$ as independent fields. Varying the Lagrangian with respect to $\bar{\psi}(x)$ gives the Dirac equation, while varying the Lagrangian with respect to $\psi(x)$ gives $\left(i\partial_\mu \gamma^\mu + m\right)\bar{\psi}(x) = 0$. Just as with complex scalar fields, we have a conserved current and charge 
\begin{equation}
    j^\mu = \bar{\psi}\gamma^\mu\psi, \quad Q = \int d^3x \psi^\dagger\psi.
\end{equation}

The solutions to the Dirac equation are plane wave solutions, the positive and negative energy ones given by
\begin{equation}
    \psi^+(x) = \exp(-ip_\mu x^\mu)\,u(\underline{p}), \quad \psi^-(x) = \exp(ip_\mu x^\mu) v(\underline{p})
\end{equation}

respectively, where $u$ and $v$ are four-component \textit{spinors} also satisfying $(\slashed{p}-m)u(p, s) = 0$ and $(\slashed{p} + m)v(p, s) = 0$:
\begin{gather}
    u(\underline{p}, s) = \sqrt{E+m} \begin{pmatrix}
        \phi^s \\ \frac{\underline{\sigma} \cdot \underline{p}}{E+m} \phi^s
    \end{pmatrix} \\
    v(\underline{p}, s) = \sqrt{E+m} \begin{pmatrix}
        \frac{\underline{\sigma} \cdot \underline{p}}{E+m} \chi^s \\ \chi^s
    \end{pmatrix},
\end{gather}

where 
\begin{gather}
    \phi^1 = \begin{pmatrix}
        1 \\ 0
    \end{pmatrix}, \quad \phi^2 = \begin{pmatrix}
        0 \\ 1
    \end{pmatrix}, \\
    \chi^s = \begin{pmatrix}
        0 \\ 1
    \end{pmatrix}, \quad \chi^2 = \begin{pmatrix}
        -1 \\ 0
    \end{pmatrix}.
\end{gather}

The energy states $s=1,\, 2$ are degenerate in energy; the \textit{helicity} operator
\begin{equation}
    \hat{h}(\underline{p}) = \frac{\underline{\Sigma} \cdot \underline{p}}{|\underline{p}|}, \quad \Sigma \equiv \begin{pmatrix}
        \underline{\sigma} & 0 \\ 0 & \underline{\sigma}
    \end{pmatrix} = -\frac{1}{4} \epsilon_{ij k} [\gamma_j, \gamma_k]
\end{equation}

commutes with the Hamiltonian and measures the spin projected along the direction of motion. In accordance with our earlier definition of $\bar{\psi}(x)$, let us list out a few properties of $u$, $\bar{u} \equiv u^\dagger \gamma^0$, $v$, and $\bar{v} \equiv v^\dagger \gamma^0$:
\begin{gather}
    \sum_s u(p, s) \bar{u} (p, s) = \slashed{p} + m \equiv 2m\Lambda_+ \\
    \sum_s v(p, s) \bar{v} (p, s) = \slashed{p} - m \equiv -2m \Lambda_- \\
    \psi = \alpha u + \beta v \rightarrow \Lambda_+ \psi = \alpha u, \, \Lambda_- \psi = \beta v \\
    \Lambda_+^2 = \Lambda_+, \quad \Lambda_-^2 = \Lambda_-, \Lambda_+ \Lambda_- = 0.
\end{gather}

\section{Quantization of the Dirac Field}

Since the rest-frame four-component spinors $u(\underline{0})$ are eigenvectors of $\Sigma_3$ with eigenvalues $\pm 1$, this suggests that we interpret the Diract equation as describing a spin-$1/2$ particle. Since they obey Fermi-Dirac statistics, we must impose the restriction that no two particles may occupy the same state - even in Fock space! Therefore, we must switch our commutation relations to \textit{anticommutation relations}:
\begin{equation}
\begin{aligned}
    \{a_r(\underline{p}), a_s^\dagger(\underline{p}')\} &= \delta_{rs}\, 2 \omega(\underline{p}) \hat{\delta}^3(\underline{p}-\underline{p}') \\
    \{a_r(\underline{p}), a_s(\underline{p}')\} &= \{a_r^\dagger(\underline{p}), a_s^\dagger(\underline{p}')\} = 0
\end{aligned}
\end{equation}

so that the occupation number of a state $\ket{\underline{p}, s}$ can only be 0 or 1, as we expect for identical fermions. Proceeding as with a scalar field, we expand the Dirac field $\psi(x)$ and its conjugate $\bar{\psi}(x)$ in terms of the free particle solutions
\begin{equation}
\begin{aligned}
    \psi(x) &= \sum_s \int \hat{d}^3 p \frac{1}{2\omega(\underline{p})} \left[a_s(\underline{p})u(p, s) e^{-ip\cdot x} + b_s^\dagger(\underline{p}) v(p, s) e^{ip\cdot x}\right] \equiv \psi^+(x) + \psi^-(x) \\
    \bar{\psi}(x) &= \sum_s \int \hat{d}^3 p \frac{1}{2\omega(\underline{p})} \left[b_s(\underline{p}) \bar{v}(p, s) e^{-ip\cdot x} + a_s^\dagger(\underline{p}) \bar{u}(p, s) e^{ip\cdot x}  \right] \equiv \bar{\psi}^+(x) + \bar{\psi}^-(x).
\end{aligned}
\end{equation}

The equal-time anticommutators for field operators are
\begin{equation}
\begin{aligned}
    \{\psi_a(t, \underline{x}), i\psi_b^\dagger(t, \underline{x}') \}  & = i \delta_{ab} \delta(\underline{x} - \underline{x}'), \\
    \{\psi_a(t, \underline{x}), \bar{\psi}_b(t, \underline{x}')\} &= \gamma_{ab}^0 \delta(\underline{x} - \underline{x}'),
\end{aligned}
\end{equation}
with all others being zero. Moving towards conserved quantities of Dirac theory, normal ordering includes a minus sign upon exchange of fermion operators:
\begin{equation}
    \normord{\psi_a\psi_b}\, = \,\normord{(\psi_a^+ + \psi_a^-)(\psi_b^+ + \psi_b^-)}\,= \psi_a^+ \psi_b^+ - \psi_b^- \psi_a^+ + \psi_a^- \psi_b^+ + \psi_a^- \psi_b^-.
\end{equation}
Also, an additional rule appears for Wick's theorem: fermionic operators must be swapped past each other, gaining a minus sign every time, until all contractions are next to each other. 

The stress-energy tensor 
\begin{equation}
    T^{\mu\nu}(x) = i \normord{\bar{\psi}(x)\gamma^\mu \partial^\nu \psi(x)}
\end{equation}

is conserved, along with the Hamiltonian
\begin{equation}
    H = \int d^3x T^{00}(x)
\end{equation}

and the 3-momentum 
\begin{equation}
    \underline{P} = \sum_s \int \hat{d}^3p.
\end{equation}

Furthermore, invariance of the Lagrangian under $\psi \rightarrow e^{i\alpha}\psi$ leads to a conserved Noether current
\begin{equation}
    j^\mu(x) = \, \normord{\bar{\psi}(x)\gamma^\mu \psi(x)}
\end{equation}
with a corresponding conserved charge $Q = \int d^3x j^0(x)$.

The covariant anticommutation relations for the Dirac field are given by
\begin{equation}
\begin{aligned}
    \{\psi_a^\pm (x), \bar{\psi}_b^\mp (y)\} &= i(i\slashed{\partial} + m)_{ab} \Delta^\pm (x-y) \\
    \{\psi_a(x), \psi_b(y)\} &= \{\bar{\psi}_a(x), \bar{\psi}_b(x)\} = 0,
\end{aligned}
\end{equation}
or, defining
\begin{equation}
    i S^\pm (x-y) \equiv \{\psi^\pm(x), \bar{\psi}^\mp(y) \} = i(i\slashed{\partial} + m)\Delta^\pm(x)
\end{equation}

Seeing the equivalence with the expressions for the scalar field, we also define
\begin{equation}
    S(x) = (i\slashed{\partial}+m)\Delta(x)
\end{equation}
such that
\begin{equation}
    {\psi_a(x), \bar{\psi}_b(y)} = S_{ab}(x-y).
\end{equation}

The time-ordered product, however, changes definition through a minus sign for fermion fields:
\begin{equation}
    T(\psi(x)\bar{\psi}(x')) = \theta(t - t')\psi(x)\bar{\psi}(x') = \theta(t' - t)\bar{\psi}(x')\psi(x)
\end{equation}

The Feynman propagator for fermions is then
\begin{empheq}[box=\widefbox]{align}
    i S_F(x - x') = \wick{\c \psi(x) \c{\bar{\psi}}(x')} = \ev{T(\psi(x)\bar{\psi(x')})}{0} = i(i\slashed{\partial}+m)\Delta_F(x-x'),
\end{empheq}

which admits the following integral representation:
\begin{empheq}[box=\widefbox]{align}
    S_F(x) = \int \hat{d}^4p e^{-ip\cdot x} \frac{\slashed{p} + m}{p^2 - m^2 + i\varepsilon}.
\end{empheq}	

\subsection{Feynman Rules for Fermions}

Let us perform the calculation for the effect of fermion operators in momentum-space:
\begin{equation}
\begin{aligned}
    \psi^+(x) \ket{e^-, \underline{p}, s} &= \sum_r \int \hat{d}^3p' \frac{1}{2\omega(\underline{p}')} a_r(\underline{p}') u(p', r)e^{-ip'\cdot x} a_s^\dagger(\underline{p})\ket{0} \\
    &= \sum_r \int \hat{d}^3p' \frac{1}{2\omega(\underline{p}')}  u(p', r)e^{-ip'\cdot x} \, 2 \omega(\underline{p}') \delta_{rs} \hat{\delta}^3(\underline{p} - \underline{p}')\ket{0} \\
    &= \int \hat{d}^3p' \, u(p', s)e^{-ip'\cdot x} \hat{\delta}^3(\underline{p} - \underline{p}') \ket{0}\\
    &= u(p, s) e^{-ip\cdot x} \ket{0}
\end{aligned}
\end{equation}

Similarly,
\begin{gather}
    \bar{\psi}^+(x)\ket{e^+, \underline{p}, s} = \bar{v}(p, s) e^{-ip\cdot x}\ket{0}\\
    \bra{e^-, \underline{p}, s}\psi^-(x) = \bra{0}\bar{u}(p, s)e^{ip\cdot x} \\
    \bra{e^+, \underline{p}, s}\bar{\psi}^-(x) = \bra{0} v(p, s)e^{ip\cdot x}.
\end{gather}

Therefore, the Feynman rules involving fermions are thus 
\begin{itemize}
    \item For each external line one of the following factors
    \begin{itemize}
        \item For each initial electron $u(p, s)$
        \item For each final electron $\bar{p, s}$
        \item For each initial positron $\bar{v}(p, s)$
        \item For each final positron $v(p, s)$
    \end{itemize}
    \item For each internal fermion line a fermion propagator
    \begin{equation}
        i\tilde{S}_F(p) = \frac{i}{\slashed{p} - m + i\varepsilon} 
    \end{equation}
    \item The Dirac-matrix-valued factors are to be ordered so that reading from right to left corresponds to the sequence obtained by following the fermion line in the direction of its arrows.
    \item The 4-momenta corresponding to the three lines which meet at a vertex are conserved. For each 4-momentum $l$ not so fixed by an integral $\int \hat{d}^4q$.
    \item Multiply the amplitude by a phase factor $(-1)^p$, where $p$ is the number of interchanges of neighbouring fermion operators required to achieve normal ordering. 
    \item Vertices: the interactions of fermions can be either purely fermionic, for example $\mathcal{L}_I = -G(\bar{\psi}\psi)^2$, or else a mixture of scalars and fermions, for example the Yukawa interaction $\mathcal{L}_I = -y\phi(\bar{\psi \psi})$, giving a vertex factor of $-iy$. 
    \item Every fermionic closed loop gives an extra minus sign. To see this, consider the simplest example,. the scalar self-energy correction due to the Yukawa interaction, and thus a single closed fermion loop. The appropriate term in the Dyson expansion is
    \begin{equation}
    \begin{aligned}
        \normord{\wick{\phi(x)\c2{\bar{\psi}}_a(x) \c1{\psi}_a(x) \phi(y) \c1{\bar{\psi}}_b(y) \c2{\psi}_b(y) }} &= -\phi(x)\phi(y)\wick{\c\psi_b(y) \c{\bar{\psi}}_a(x) \c\psi_a(x) \c{\bar{\psi}}_b(y)}\\
        &= - \phi(x) \phi(y) (iS_F(y-x)_{ba}) (iS_F(x-y)_{ab})
    \end{aligned}
    \end{equation}
\end{itemize}

\subsection{$C$, $P$, and $T$ for fermion fields}

If under \textbf{parity}, $\psi(x) \rightarrow \psi_P(x) = P\psi(\bar{x})$ for some Dirac matrix $P$, then 
\begin{equation}
    \gamma^\mu \rightarrow P \gamma^\mu P^{-1} = \gamma_\mu,
\end{equation}
so $P = \gamma^0$.
\begin{equation}
    \gamma^0 \gamma^\mu \gamma^0=\left\{\begin{array}{cl}
        \gamma^0 & \text { if } \mu=0 \\
        -\gamma^i & \text { if } \mu=i=1,2,3
        \end{array}\right.
\end{equation}
Then
\begin{equation}
\begin{aligned}
    \bar{\psi}\psi &\rightarrow \bar{\psi} \psi \\
    \bar{\psi}\gamma^\mu \psi & \rightarrow \bar{\psi}\gamma_\mu \psi \\
    \mathcal{L} &\rightarrow \mathcal{L} = \bar{\psi}(i\slashed{\partial}-m)\psi.
\end{aligned}
\end{equation}

However, spinors and mode operators change sign of their momentum, e.g. $u(\underline{p}, s) \rightarrow \gamma^0u(\underline{p}, s) = u(-\underline{p}, s)$, using the same arguments as for scalar fields (see Eq. \ref{eq:parity_scalar}).

\textbf{Time reversal} is \textit{antiunitary}, so if $\psi(x) \rightarrow \psi_T(x) = T\psi(-\bar{x})$, we require
\begin{equation}
    \gamma^\mu \rightarrow T(\gamma^\mu)^* T^{-1}.
\end{equation}
The solution is $T = -T^{-1} = \gamma^1\gamma^3$, because $(\gamma^1\gamma^3)^2 = -1$, and 
\begin{equation}
    \begin{aligned}
        -\gamma^1 \gamma^3 \gamma^0 \gamma^1 \gamma^3 &=\gamma^0, \\
        -\gamma^1 \gamma^3 \gamma^1 \gamma^1 \gamma^3 &=-\gamma^1, \\
        -\gamma^1 \gamma^3\left(-\gamma^2\right) \gamma^1 \gamma^3 &=-\gamma^2, \\
        -\gamma^1 \gamma^3 \gamma^3 \gamma^1 \gamma^3 &=-\gamma^3.
        \end{aligned}
\end{equation}

Then
\begin{equation}
\begin{aligned}
    \bar{\psi}\psi &\rightarrow \bar{\psi}\psi, \\
    \bar{\psi}\gamma^\mu \psi &\rightarrow \bar{\psi} \gamma_\mu \psi, \\
    \mathcal{L} & \rightarrow \mathcal{L}.
\end{aligned}
\end{equation}

This time, spinors and mode operators change spin sign too: $u(\underline{p}, s) \rightarrow T u(\underline{p}, s)^* = u(-\underline{p}, -s)$, which can be checked by inserting
\begin{equation}
    T=\gamma^1 \gamma^3=\left(\begin{array}{rr}
        i \sigma^2 & 0 \\
        0 & i \sigma^2
        \end{array}\right)
\end{equation}
into the definition of spinors.

\textbf{Charge conjugation} is a unitary operation that exchanges particles and antiparticles, leaving $\underline{p}$ and $s$ unchanged:
\begin{gather}
    Ca_s^\dagger(\underline{p})C^\dagger = b_s^\dagger(\underline{p}), \quad Cb_s^\dagger(\underline{p})C^\dagger = a_s^\dagger \\
    Ca_s(\underline{p})C^\dagger = b_s(\underline{p}), \quad Cb_s(\underline{p})C^\dagger = a_s(\underline{p}).
\end{gather}

Inserting these changes into the mode expansion of $\psi$ gives us the properties of a matrix in spinor space $c$ with properties 
\begin{equation}
    cu_s^* = v_s, \quad cv_s^* = u_s, cc^* = 1,
\end{equation}
which turns out to be $c=i\gamma^2$. Writing things in terms of the dirac adjoint, $\psi_c =i\gamma^2\psi^* = i\gamma^2\gamma^0 \bar{\psi}^T \equiv C\bar{\psi}^T$. Then $C = i\gamma^2\gamma^0$, and under charge conjugation
\begin{equation}
\begin{aligned}
    \bar{\psi}\psi &\rightarrow -\psi^T\bar{\psi}^T = \bar{\psi}\psi,\\
    \normord{\bar{\psi}\gamma^\mu\psi} &\rightarrow\, \normord{\psi^T(\gamma^\mu)^T\bar{\psi}^T}\, = \,-\normord{\bar{\psi}\gamma^\mu\psi}, \\
    \mathcal{L} &\rightarrow \mathcal{L},
\end{aligned}
\end{equation}

where we have normal ordered the vector current, since both fields are evaluated at the same space-time point. Summarizing everything:
\begin{equation}
    \begin{array}{lll}
        P: & \psi \rightarrow P \psi, & \bar{\psi} \rightarrow \bar{\psi} P^{-1}, \quad P=\gamma^0 \\
        T: & \psi \rightarrow T \psi, & \bar{\psi} \rightarrow \bar{\psi} T^{-1}, \quad T=\gamma^1 \gamma^3 \\
        C: & \psi \rightarrow C \bar{\psi}^T, & \bar{\psi} \rightarrow-\psi^T C^{-1}, \quad C=i \gamma^2 \gamma^0.
        \end{array}
\end{equation}

The \textit{CPT Theorem} (Pauli, Schwinger, Bell, 1954), not proven here, states that any Lorentz invariant local action is invariant under the combined operation of $CPT$. Since under $PT$, $x^\mu \rightarrow -x^\mu$, and under $C$ particles and antiparticles are exchanged, we interpret antiparticles as particles going backwards in space-time, as is implicit in the way we draw Feynman diagrams.

\section{Quantization of the Electromagnetic field}

The Maxwell equations follow from the Lagrangian density 
\begin{equation}
    \mathcal{L} = -\frac{1}{4}F_{\mu\nu} F^{\mu\nu} - A_\mu J^\mu.
\end{equation}

Setting $\delta S = 0$ gives $\partial_\mu F^{\mu\nu} = J^\nu$ and $\partial_\mu J^\mu = 0$. The second equation reduces the apparent number of degrees of freedom in $A^\mu$ from 4 to 3. This is the result of gauge invariance - we are free to choose
\begin{equation}
    A^\mu \rightarrow A^\mu - \partial^\mu \chi
\end{equation}

for some scalar field $\chi$, and this leaves the equations of motion unchanged. However, let us examine this more closely. In the Hamiltonian formalism, 
\begin{equation}
    \phi^\mu(x) = \pdv{\mathcal{L}}{\dot{A}_\mu} = -F^{0\mu}(x),
\end{equation}

which vanishes for $\mu = 0$, so $\pi^0 \equiv 0$. This means we cannot impose the usual ETCRs between $A^0(t, \underline{x})$ and $\pi^0(t, \underline{x}')$. Moreover
\begin{gather}
    \pi^i = -F^{0i} = i\dot{A}^i + \partial^i A^0 \\
    \underline{\nabla} \cdot \underline{\pi} = -J^0,
\end{gather}

which gives an additional constraint on $pi^i$. So there are only two genuine degrees of freedom for $\pi^\mu$ and $A^\mu$. 

For our quantization procedure, we adopt the Coulomb gauge, in which only the two physical degrees of freedom are present, quantize these, then generalise to restore manifest Lorentz covariance and gauge invariance. The Coulomb gauge is given by 
\begin{equation}
    A^0 = 0, \quad \underline{\nabla} \cdot \underline{A} = 0.
\end{equation}
Then the free Maxwell equations in the Coulomb gauge are simply $\partial^2 \underline{A} = 0$ with solutions
\begin{equation}
    \underline{A} = \underline{\epsilon}^r(\underline{k}) e^{-ik\cdot x}, \quad k^2 = 0, \quad \underline{k} \cdot \underline{\epsilon}^r(\underline{k}).
\end{equation}

Choosing $\underline{\epsilon}^3 = \underline{k}/|\underline{k}|$, $\underline{\epsilon}^r$ form an orthonormal basis:
\begin{equation}
    \underline{\epsilon}^r \cdot \underline{\epsilon}^{s*} = \delta^{rs}, \quad \sum_{r=1, 2, 3}\underline{\epsilon}_i^r \underline{\epsilon}_j^{r*} = \delta_{ij}.
\end{equation}

We can use these to define a term which will be useful later: the transverse projector
\begin{equation}
    P_{ij}(\underline{k}) = \sum_{r=1, 2} \underline{\epsilon}_i^r \underline{\epsilon}_j^{r*} = \delta_{ij} - \underline{\epsilon}_i^3 \underline{\epsilon}_j^{3*} = \delta_{ij} - \frac{k_i k_j}{|\underline{k}|^2}
\end{equation}
which obeys the identity $P_{ij}P_{jk} = P_ik$.
Naturally, we perform a mode expansion of the free, \textbf{real} electromagnetic field $\underline{A}(x)$:

\begin{equation}
    \underline{A}(x) = \underline{A}_+(x) + \underline{A}_-(x) = \sum_{r=1,2} \int \hat{d}^3k \frac{1}{2\omega(\underline{k})} \left(\underline{\epsilon}_r(\underline{k}) a_r(\underline{k}) e^{-ik\cdot x} + \underline{\epsilon}_r(\underline{k})^* a_r^\dagger(\underline{k})e^{ik\cdot x}\right), 
\end{equation}
and impose the usual commutation relations
\begin{gather}
    [a_r(\underline{k}), a_{r'}^\dagger(\underline{k}')] = 2\delta_{rr'} \omega(\underline{k}) \hat{\delta}^3(\underline{k} - \underline{k}') \\
    [a_r(\underline{k}), a_{r'}(\underline{k}')] = [a_r^\dagger(\underline{k}), a_{r'}^\dagger(\underline{k}')] = 0,
\end{gather}

which leads to the covariant commutators
\begin{gather}
    iD_+^{ij}(x-y) \equiv [A_+^i(x), A_-^j(y)] = \int \hat{d}^3k \frac{1}{2\omega(\underline{k})} P_{ij}(\underline{k})e^{-ik\cdot (x-y)}, \\
    iD_-^{ij}(x-y) \equiv [A_-^i(x), A_+^j(y)] = - D_+^{ij}(y-x) = -\int \hat{d}^3k \frac{1}{2\omega(\underline{k})} P_{ij}(\underline{k})e^{ik\cdot (x-y)}
\end{gather}
and the Feynman propagator (in the Coulomb gauge)
\begin{equation}
    i D_F^{ij}(x-y) \equiv  \ev{T(A^i(x)A^j(y))}{0} = i \int \hat{d}^4k \frac{P^{ij}(\underline{k})}{k^2+i\varepsilon} e^{-ik \cdot (x-y)}
\end{equation}

\subsection{Recovering Lorentz Covariance}

The Coulomb gauge is not manifestly Lorentz invariant. We can fix this by choosing some timelike unit four-vector $n^\mu = (1, \underline{0})$, which lets us rewrite the Coulomb gauge conditions
\begin{gather}
    A^0 = 0 \rightarrow n^\mu A_\mu = 0 \\
    \underline{\nabla} \cdot \underline{A} = 0 \rightarrow \partial^\mu A_\mu = 0,
\end{gather}
which lets us write our results in a Lorentz covariant way; however, they may be dependent on $n^\mu$. We may expand our polarization vectors in a similar way $\epsilon_r^\mu = (0, \underline{\epsilon}_r)$, recovering the identities
\begin{equation}
    k \cdot \epsilon_r = 0, \quad
    \epsilon_r \cdot \epsilon_s^* = -\delta_{rs}
\end{equation}
and the projector
\begin{equation}
    P^{\mu\nu}(k) = \sum_{r=1, 2} \epsilon_r^\mu \epsilon_r^{\nu*} = -\eta^{\mu\nu}  + \frac{k^\mu \bar{k}^\nu + \bar{k}^\mu k^\nu}{k \cdot \bar{k}} 
\end{equation}
where we have introduced $\bar{k}^\mu = (|\underline{k}|, -\underline{k})$, so $\bar{k}^2 = 0$, $k \cdot \bar{k} = 2 |\underline{k}|^2 = 2(k \cdot n)^2$, and $n^\mu = (k^\mu + \bar{k}^\mu)/2 k \cdot n$. The projection operator is still a projection operator:
\begin{equation}
    P^{\mu\alpha}(k) P_\alpha^\nu = -P^{\mu\nu}(k).
\end{equation}

The Feynman propagator, in covariant form, becomes
\begin{equation}
    i D_F^{\mu\nu}(x-y) \equiv \ev{T(A^\mu(x A^\nu(y)))}{0} = i \int \hat{d}^4k \frac{P^{\mu\nu}}{k^2 +i\varepsilon} e^{-ik \cdot (x-y)}.
\end{equation}

Note that the $P^{\mu\nu}$ is only a projection operator when $k$ is on-shell. But since internal photons are off-shell, they are also not transverse, which means they include unphysical longitudinal and timelike modes which however cancel in the full amplitude, which will be discussed later. Furthermore, we have also introduced the arbitrary four-vector $\bar{k}^\mu$, which has no physical interpretation - physical results must be independent of this direction.

In a general linear gauge, the projector becomes more complicated and gauge-dependent, leading to a gauge-dependent Feynman propagator and Feynman rules. The remainder of the chapter focuses on convincing the reader that \textbf{physical results} are in fact \textbf{gauge-independent}.

\subsection{Internal Photons and Feynman Rules}

Consider the interaction Hamiltonain density $A^\mu J_\mu$, where $J_\mu$ is some generic current (dependent on scalar or fermion matter fields). Gauge invariance of the theory requires that $J^\mu$ is conserved: $\partial^\mu J_\mu = 0$. In Fourier space, we express this as $k^\mu J_\mu = 0$. 

Consider now graphs with internal photon lines, and thus a contraction between photon fields:
\begin{equation}
\begin{aligned}
    \hat{\delta}^4(\sum p_f - \sum p_i) &= \ev{T(\cdots \smallint d^4x J_\mu(x)\wick{\c{A}^\mu(x) \smallint d^4y J_\nu(y) \c{A}^\nu(y)})}{\cdots} \\
    &= \ev{T(\cdots \smallint d^4x \smallint d^4y J_\mu(x) J_\nu(y) iD_F^{\mu\nu}(x-y))}{\cdots} \\
    &= \ev{T(\cdots \smallint \hat{d}^4k \frac{P^{\mu\nu}(k)}{k^2+i \varepsilon} \tilde{J}_\mu(k) \tilde{J}_\nu(-k))}{\cdots}.
\end{aligned}
\end{equation}

However, using $k^\mu J_\mu = 0$,
\begin{equation}
    P^{\mu\nu} \tilde{J}_\mu(k) \tilde{J}_\nu(-k) = (-\eta^{\mu\nu} + k^\mu \alpha^\nu + \alpha^{\mu*}k^\nu) \tilde{J}_\mu(k) \tilde{J}_\nu(-k) = -\tilde{J}_\mu(k) \tilde{J}_\nu(-k),
\end{equation}

so the amplitude is independent of $\alpha$ and is thus gauge independent, which means that in practice we can use the simpler \textit{Feynman gauge} propagator
\begin{equation}
    \frac{-\eta^{\mu\nu}}{k^2 + i\varepsilon}.
\end{equation}

Thus we have our Feynman rules for photons:
\begin{itemize}
    \item for every incoming photon, a factor of $\epsilon_r^\mu(k)$
    \item for every outgoing photon, a factor of $\epsilon_r^{\mu*}(k)$
    \item for every internal photon, a factor of $iP^{\mu\nu}(k)/(k^2+i\varepsilon) = -i\eta^{\mu\nu}/(k^2+i\varepsilon)$.
\end{itemize}

\subsection{Ward Identities}

Now consider some amplitude $\mathcal{M}$ with an external photon: assuming wlog that this photon is incoming with momentum $k$ and polarization $r$,
\begin{equation}
    \hat{d}^4(\sum p_f - \sum p_i)  = \mel{\cdots}{T( \cdots \smallint d^4x J_\mu A^\mu)}{k, r;\cdots}.
\end{equation}
Now we can rewrite the rhs using the Feynman rule for the external photon as 
\begin{equation}
    \mel{\cdots}{T(\cdots \smallint d^4x J_\mu \epsilon_r^\mu(k) e^{-ik\cdot x})}{\cdots} = \ev{T(\cdots \tilde{J}_\mu(-k) \epsilon_r^\mu(k))}{\cdots }.
\end{equation}
Under a gauge transformation $\epsilon_r^\mu(k) \rightarrow \epsilon_r^\mu(k) + ik^\mu c_r(k)$, but $k^\mu \tilde{J}_\mu = 0$, so $\mathcal{M}$ is invariant under a gauge transformation of an external photon. Furthermore, writing $\mathcal{M} = \epsilon_r^\mu(k)\mathcal{M}_\mu$, current conservation implies the \textit{Ward identity}
\begin{equation}
    k^\mu \mathcal{M}_\mu = 0.
\end{equation}




\end{document}